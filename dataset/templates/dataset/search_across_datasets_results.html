{% block content %}
{% load getattr %}
{% if dataset_list %}
<table class="search_results_table" summary="Search results">
	<thead>
		<tr>
			<th># Items</th>
			{% for keyword, header in table_columns.items %}
			<th>{{ header }}</th>
			{% endfor %}
			<th>Characteristics</th>
		</tr>
	</thead>
	<tbody>
		{% for dataset in dataset_list %}
		{% if dataset.query_string %}
		<tr class='open_data_search' dataset_id="{{ dataset.id }}" dataset_name="{{ dataset.name }}" search_data_form_href="{% url dataset.id|add:':search_data_form' %}?{{ dataset.query_string }}" search_data_results_href="{% url dataset.id|add:':search_data_results' %}?{{ dataset.query_string }}" dataset_description="{{ dataset.description }}">
		{% else %}
		<tr class='open_data_search' dataset_id="{{ dataset.id }}" dataset_name="{{ dataset.name }}" search_data_form_href="{% url dataset.id|add:':search_data_form' %}" search_data_results_href="{% url dataset.id|add:':search_data_results' %}" dataset_description="{{ dataset.description }}">
		{% endif %}
			<td>{{ dataset.item_count }}</td>
			{% for keyword, header in table_columns.items %}
			<td>{{ dataset|getattr:keyword }}</td>
			{% endfor %}
			<td>{{ dataset.characteristics_names|join:", " }}</td>
		</tr>
		{% endfor %}
	</tbody>
</table>
{% elif message %}
<p>{{ message }}</p>
{% else %}
<p>Nothing correspond to your search criteria.</p>
{% endif %}

{% endblock %}

