{% block content %}
{% load getattr %}
{% if data_list %}
<table class="search_results_table" dataset_name="{{ dataset_name }}" summary="Search results">
	<thead>
		<tr>
			<th></th><!-- checkbox column -->
			<th></th><!-- download_data column -->
			{% for keyword, header in table_columns.items %}
			<th>{{ header }}</th>
			{% endfor %}
			<th>Tags</th>
		</tr>
	</thead>
	<tbody>
		{% for data in data_list %}
		<tr>
			<td>
				<input type="checkbox" name="data_id" value="{{ data.id }}"></input>
			</td>
			<td>
				<a class="download_data small_button" title="Download data" href="{% url dataset_name|add:':download_data' data.id %}" target="_blank" download>Download</a>
			</td>
			{% for keyword, header in table_columns.items %}
			<td>{{ data|getattr:keyword }}</td>
			{% endfor %}
			<td>{{ data.tags_names|join:", " }}</td>
		</tr>
		{% endfor %}
	</tbody>
</table>
<div class="page_navigation">
	{% if page_obj.number > 1 %}
	<a class="first_page small_button" title="Go to first page" href="{% url dataset_name|add:':search_data_results' %}?{{ query_string }}&{{ page_kwarg }}=1">First page</a>
	{% else %}
	<a class="first_page small_button" title="Go to first page">First page</a>
	{% endif %}
	{% if page_obj.has_previous %}
	<a class="previous_page small_button" title="Go to previous page" href="{% url dataset_name|add:':search_data_results' %}?{{ query_string }}&{{ page_kwarg }}={{page_obj.previous_page_number}}">Previous page</a>
	{% else %}
	<a class="previous_page small_button" title="Go to previous page">Previous page</a>
	{% endif %}
	<!-- Select all and none buttons -->
	<button class="select_all" title="Select all">Select all</button>
	<button class="unselect_all" title="Unselect all">Unselect all</button>
	{% if page_obj.has_next %}
	<a class="next_page small_button" title="Go to next page" href="{% url dataset_name|add:':search_data_results' %}?{{ query_string }}&{{ page_kwarg }}={{page_obj.next_page_number}}">Next page</a>
	{% else %}
	<a class="next_page small_button" title="Go to next page">Next page</a>
	{% endif %}
	{% if page_obj.number < paginator.num_pages %}
	<a class="last_page small_button" title="Go to last page" href="{% url dataset_name|add:':search_data_results' %}?{{ query_string }}&{{ page_kwarg }}=last">Last page</a>
	{% else %}
	<a class="last_page small_button" title="Go to last page">Last page</a>
	{% endif %}
</div>

<div class="actions search_results_actions">
	<form action="{% url 'data_selection_create' %}" method="post">
		{% csrf_token %}
		<input type="hidden" name="user_data_selection" value="{{ dataset_name }}">
		<input type="hidden" name="dataset_name" value="{{ dataset_name }}">
		<input type="hidden" name="query_string" value="{{ query_string }}">
		<input type="hidden" name="all_selected" value="false">
		<input type="hidden" name="data_ids">
		<div class="actions">
			<button class="add_to_selection" title="Add the selected data to selection">Add to selection</button>
		</div>
	</form>
</div>

{% elif message %}
<p>{{ message }}</p>
{% else %}
<p>No data correspond to your search criteria.</p>
{% endif %}
{% endblock %}
